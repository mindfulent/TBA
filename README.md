<p align="center">
  <img src="tba_banner.png" alt="TBA Logo" width="100%">
</p>

# TBA (TheBlock.Academy) v0.9.95

A curated Fabric 1.21.1 modpack for The Block Academy CMP, built with [Packwiz](https://packwiz.infra.link/) for easy version control and distribution.

**189 mods total** — see [Mod Distribution](#mod-distribution) for details.

## Features

### Performance Optimizations
- **Sodium** - Modern rendering engine (significant FPS boost)
- **Lithium** - Game logic optimizations (~50% tick improvement)
- **FerriteCore** - Memory usage reduction (~45% RAM savings)
- **ModernFix** - Faster loading, dynamic resource management
- **Krypton** - Network stack optimization
- **Iris Shaders** - OptiFine shader compatibility
- **Distant Horizons** - LOD rendering for extended view distances
- **C2ME** - Multi-core chunk generation
- **ImmediatelyFast** - Immediate mode rendering optimization
- **BadOptimizations** - Micro-optimizations for various game systems
- **Clumps** - XP orb merging to reduce entity lag
- **Enhanced Block Entities** - Faster block entity rendering

### Building Tools
- **Axiom** - All-in-one building/editing tool with real-time previews, terraforming, sculpting (Right-Shift for Editor Mode)
- **Litematica** - Schematic mod for displaying build guides/holograms
- **Effortless Structure** - Mirrors, arrays, build modes, block randomizer

### Cinematics & Recording
- **ReplayMod** - Timeline-based recording with keyframed cameras and video export (requires FFmpeg)
- **Better Third Person** - Independent camera rotation, 360° orbit, enhanced third-person controls
- **Stable Cam** - Stable camera perspective mode for smooth cinematic recordings
- **First-person Model** - See your own body in first person
- **Not Enough Animations** - Player animations for eating, map holding, etc.
- **Camera Overhaul** - Tilting and swaying camera effects
- **Camera Utils** - Freecam, third-person distance, and camera controls
- **3D Skin Layers** - Renders skin layers with depth
- **Eating Animation** - Visible eating and drinking actions
- **AutoHUD** - Auto-hiding HUD for cleaner gameplay
- **Even More Instruments** - Keyboard, violin, guitar, saxophone with MIDI support

### Building & Decoration
- **Chipped** - 11,000+ decorative block variants with connected textures
- **Handcrafted** - 250+ furniture pieces (fantasy, steampunk, medieval styles)
- **Macaw's Suite** - Doors, Windows, Bridges, Roofs, Fences, Trapdoors, Furniture, Lights
- **Excessive Building** - 100+ vanilla-style blocks (mosaic wood, vertical stairs), hammer/wrench tools
- **Adorn** - Furniture (chairs, sofas, tables, shelves, kitchen blocks)
- **Supplementaries** - Jars, signs, clocks, pulleys, cages, and 100+ decorative/utility items
- **Amendments** - Supplementaries companion (wall lanterns, skull candles, ceiling pots)
- **Connectible Chains** - Decorative chain links between fences and walls
- **Underlay** - Place carpets and blocks under chests, beds, stairs
- **Arts & Crafts** - Dyeable decorated pots, chalk, terracotta shingles, soapstone
- **ReFramed** - Copy any block's appearance onto stairs, slabs, fences, and more
- **Armor Statues** - Pose and customize armor stands with a book interface
- **Little Joys** - Small ambient details (clovers, rocks, fallen leaves, butterflies)
- **WindChime** - Decorative wind chimes (bamboo, glass, amethyst, copper, and more)
- **Diagonal Walls** - Walls connect diagonally
- **Falling Leaves** - Leaf particles fall from trees
- **Beautify Refabricated** - Decorative blocks (ropes, blinds, trellises)
- **Sooty Chimneys** - Chimneys with realistic smoke particle effects
- **Clutter** - Small decorative objects for detailed builds
- **Fetzi's Asian Decoration** - Asian-themed decor blocks
- **Dusty Decorations** - Aged and weathered block variants
- **NiftyCarts** - Decorative market and farm carts
- **Diagonal Windows** - Angled window placements
- **Diagonal Fences** - Fences connect diagonally
- **Continuity** - Connected textures (glass, bookshelves, etc.)

### Content
- **Farmer's Delight Refabricated** - Cooking and farming expansion
- **More Delight** - Additional foods and recipes for Farmer's Delight
- **Storage Drawers** - Compact item storage system
- **Traveler's Backpack** - Wearable backpacks with fluid storage and tool slots
- **Universal Sawmill** - Sawmill workstation with Carpenter villager
- **[Let's Do] Bakery** - Pastries, cakes, and baking stations (includes Farm & Charm)
- **[Let's Do] Vinery** - Vineyard and wine themed content
- **Fabric Seasons** - Four seasons with visual and gameplay changes (currently locked to Winter)
- **Joy of Painting** - Paint custom pictures on canvases and display them like vanilla paintings
- **Camerapture** - Take in-game photos and hang them as pictures
- **WaterFrames** - Display images and videos from URLs on in-game frames and projectors
- **Immersive Paintings** - Upload custom images as paintings in any size
- **Lootr** - Per-player loot in chests, barrels, and minecarts (no stealing!)
- **[Let's Do] Brewery** - Brewing equipment and alcoholic drinks
- **[Let's Do] Meadow** - Alpine cottage aesthetic and content
- **[Let's Do] Beach Party** - Beach furniture and decorations
- **Friends and Foes** - Mob vote mobs (Copper Golem, Tuff Golem, Mooblooms, and more)
- **Illager Invasion** - New illager types and boss encounters
- **Naturally Trimmed** - Mobs spawn wearing armor trims
- **Trimmable Tools** - Apply armor trims to tools
- **Do A Barrel Roll** - Enhanced elytra flight control

### Web Map
- **BlueMap** - Live 3D web map of the server world (port 8100)

### Quality of Life
- **Roughly Enough Items (REI)** - Recipe viewer and item browser
- **JourneyMap** - Full-featured world map with browser viewing and waypoints
- **WTHIT** - Block/entity tooltips (what am I looking at?)
- **AppleSkin** - Food/hunger visualization
- **Mouse Wheelie** - Enhanced inventory scrolling, sorting, and refilling
- **Controlling** - Searchable keybinds with conflict detection
- **ItemSwapper** - Quick item palette for swapping similar blocks
- **Gamemode Unrestrictor** - Use F3+F4 gamemode menu even when cheats are disabled
- **InvMove** - Move while inventory is open
- **Mod Menu** - Browse and configure mods from the title screen
- **Carry On** - Pick up and carry blocks, chests, and entities
- **Sit** - Right-click stairs and slabs to sit
- **Actually Harvest** - Right-click crops to harvest and replant
- **Universal Bone Meal** - Bone meal works on more plants
- **Better Climbing** - Enhanced ladder climbing mechanics
- **Block Runner** - Run faster on path blocks and other surfaces
- **Easy Magic** - Enchanting table QoL
- **Trade Cycling** - Cycle villager trades easily
- **Bridging Mod** - Bedrock-style reach-around placement
- **Crash Assistant** - Helpful GUI after crashes
- **Leaf Me Alone** - Ride through leaves
- **Leaves Be Gone** - Quick leaf decay
- **Paginated Advancements** - Better advancement screen
- **Stack to Nearby Chests** - Terraria-style deposit into chests
- **Status Effect Bars** - Duration bars on effect icons

### Scripting & Automation
- **Minescript** - Python scripting for Minecraft (run scripts from chat with `\scriptname`)

### Audio & Immersion
- **Sound Physics Remastered** - Realistic reverb and sound occlusion
- **AmbientSounds** - Dynamic ambient soundscapes based on biome, weather, and time of day
- **Subtle Effects** - Ambient environmental particle effects
- **Presence Footsteps** - Material-aware footstep sounds
- **Visuality** - Additional ambient particles
- **Particle Rain** - Enhanced rain and snow particle effects
- **Cool Rain** - Material-specific rain sounds
- **Sounds** - 170+ UI and interaction sounds
- **Blur+** - GUI background blur effect
- **Inventory Particles** - Item pickup particle effects
- **Smooth Swapping** - Animated item movement in inventories
- **Fast Item Frames** - Item frame rendering optimization

### Multiplayer
- **Simple Voice Chat** - Proximity-based voice communication
- **Voice Chat Interaction** - Nearby sounds play through voice chat proximity
- **StreamCraft Live** - Real-time video conferencing (webcam, screen share, voice) rendered on in-world blocks via LiveKit WebRTC
- **SynthCraft** - AI-powered music generation — describe genre, mood, and lyrics to create original songs; listen privately or broadcast server-wide
- **Universal Graves** - Death item protection (server-side, vanilla client compatible)
- **Flan** - Land claiming and protection
- **Better Sleep** - Sleep voting for multiplayer nights
- **Connectivity** - Improved connection stability and error handling
- **LuckPerms** - Advanced permissions system (server-side)
- **Essential Permissions** - Adds permission nodes to vanilla commands for LuckPerms integration (server-side)
- **Advanced Backups** - Automated world backups with scheduling and retention policies (server-side)

### Discord Integration
- **Simple Discord RPC** - Shows Minecraft activity in your Discord status (client-side)
- **Fabricord** - Bridges server chat with Discord channel (server-side)
- **AutoWhitelist** - Discord-based whitelist: `/register <username>` to join (server-side)

### Bundled Shaders
- **BSL v10.0** - High visual quality (enabled by default)
- **Complementary Reimagined r5.6.1** - Vanilla-enhanced aesthetic with "Potato" to "Ultra" presets
- **Photon v1.2a** - Gameplay-focused with semi-realistic style and colored lighting
- **Solas Shader v3.1c** - Fantasy stylized with colored lighting and fancy visuals

### Default Settings
The modpack comes pre-configured with sensible defaults:
- GUI Scale: 3x
- Render Distance: 32 (max)
- Simulation Distance: 32 (max)
- Auto-Jump: Off
- Dark Loading Screen: On
- Shaders: BSL v10.0 enabled
- JourneyMap minimap: Hidden by default (press J to open full map)

## Quick Start

### For Players

1. Download [Prism Launcher](https://prismlauncher.org/)
2. Get the latest `.mrpack` from [Releases](https://github.com/mindfulent/TBA/releases)
3. In Prism: **Add Instance** → **Import** → Select the `.mrpack`
4. Allocate 4-6GB RAM (Edit Instance → Settings → Memory)
5. **Get whitelisted:** Use `/register <your-minecraft-username>` in our Discord
6. Connect to the server!

### Pre-Generated LOD Data (Optional)

We provide pre-generated Distant Horizons LOD data for the server. This gives you beautiful distant terrain rendering without waiting for your client to generate it.

**Download:** [DistantHorizons.sqlite](https://drive.google.com/YOUR_LINK_HERE)

Place the downloaded `DistantHorizons.sqlite` file in your Prism Launcher instance's minecraft folder:

**Windows** (Win+R, paste, replace `{username}` with your Windows username):
```
C:\Users\{username}\AppData\Roaming\PrismLauncher\instances\TBA\minecraft
```

**macOS** (Finder → Go → Go to Folder, replace `{username}`):
```
/Users/{username}/Library/Application Support/PrismLauncher/instances/TBA/minecraft
```

**Alternative:** In Prism Launcher, right-click the instance → "Folder" → drop the file there.

### For Development

```bash
# Clone the repository
git clone https://github.com/mindfulent/TBA.git
cd TBA

# Download Packwiz (Windows)
# Get from: https://github.com/packwiz/packwiz/releases
# Or via nightly: https://nightly.link/packwiz/packwiz/workflows/go/main/Windows%2064-bit.zip

# Add a mod
./packwiz.exe mr install <mod-slug> -y

# Update all mods
./packwiz.exe update --all

# Export for distribution
./packwiz.exe modrinth export
```

## Packwiz Commands

| Command | Description |
|---------|-------------|
| `packwiz mr install <slug>` | Add mod from Modrinth |
| `packwiz cf install <slug>` | Add mod from CurseForge |
| `packwiz update --all` | Update all mods to latest versions |
| `packwiz update <name>` | Update specific mod |
| `packwiz remove <name>` | Remove a mod |
| `packwiz list` | List all installed mods |
| `packwiz refresh` | Refresh index after manual changes |
| `packwiz modrinth export` | Export to `.mrpack` format |
| `packwiz serve` | Local test server at `localhost:8080` |

## Project Structure

```
TBA/
├── pack.toml                 # Pack metadata (name, version, MC version, loader)
├── index.toml                # File index with hashes
├── options.txt               # Default game options
├── mods/                     # Mod metadata files (.pw.toml)
├── config/                   # Mod configurations
│   └── iris.properties       # Shader settings (BSL enabled)
├── shaderpacks/              # Bundled shaders
│   ├── BSL_v10.0.zip
│   ├── ComplementaryReimagined_r5.6.1.zip
│   └── Solas_Shader_v3.1c.zip
├── journeymap/config/6.0/    # JourneyMap config (minimap hidden)
└── docs/
    ├── CREDITS.md            # Mod creators and donation links
    ├── server-plan.md        # Mod ecosystem research
    └── setup-guide.md        # Deployment guide
```

## Server Deployment

The server uses **mrpack4server** which downloads modpacks from GitHub releases. Updates are managed via `server-config.py`.

### Quick Deploy (for maintainers)

```bash
# After making changes:
./packwiz.exe modrinth export
git add -A && git commit -m "v0.9.X - description" && git push
gh release create v0.9.X TBA-0.9.X.mrpack --title "v0.9.X"

# Test locally first (recommended)
python server-config.py update-pack 0.9.X           # Updates LocalServer
# Start LocalServer and verify

# Then deploy to production
python server-config.py update-pack 0.9.X -p        # Updates Bloom.host
python server-config.py restart
```

### Server Management Commands

```bash
# Modpack deployment
python server-config.py update-pack <version>       # Update LocalServer (default)
python server-config.py update-pack <version> -p    # Update production (Bloom.host)

# Server control
python server-config.py status                      # Check server status
python server-config.py restart                     # Restart server
python server-config.py cmd "say Hello"             # Send console command

# World Sync (primary backup strategy)
python server-config.py world-status                # View local backup status
python server-config.py world-download              # Download production → LocalServer
python server-config.py world-upload                # Upload LocalServer → production

# Advanced Backups (secondary - on-server backups)
python server-config.py backup list                 # List server backups
python server-config.py backup create               # Create manual backup
```

See [docs/DEPLOYMENT_GUIDE.md](docs/DEPLOYMENT_GUIDE.md) for complete deployment documentation.
See [docs/BACKUP-STRATEGY.md](docs/BACKUP-STRATEGY.md) for backup and restore procedures.

### Initial Setup

1. Upload `mrpack4server-0.5.0.jar` to server root
2. Create `modpack-info.json` pointing to GitHub release
3. Set server jar to `mrpack4server-0.5.0.jar` in Bloom.host panel
4. Start server - mods auto-download from GitHub

### Fabricord Discord Setup

After first server start, configure Discord integration:

1. **Create a Discord Bot:**
   - Go to [Discord Developer Portal](https://discord.com/developers/applications/)
   - Create a new application → Bot → Copy the token
   - Enable "Message Content Intent" under Bot settings
   - Invite bot to your server with Send Messages + Read Message History permissions

2. **Get Channel IDs:**
   - Enable Developer Mode in Discord (Settings → App Settings → Advanced)
   - Right-click your chat channel → Copy ID
   - (Optional) Right-click a console channel → Copy ID

3. **Edit server config:**
   - Location: `home/fabricord/config.yml` (in server root)
   - Set your bot token and channel IDs in the YAML config

4. **Restart the server**

## Mod Distribution

The modpack has two exports for different purposes:

| Export | Format | For | Mod Count |
|--------|--------|-----|-----------|
| `TBA-X.Y.Z.zip` | CurseForge | CurseForge App users | 123 mods |
| `TBA-X.Y.Z.mrpack` | Modrinth | Prism Launcher + Server | 126 mods |

**Server-only mods** (included in `.mrpack`, excluded from `.zip`):
- **AutoWhitelist** - Discord `/register` command for whitelist
- **Better Sleep** - Sleep voting for multiplayer nights
- **Fabricord** - Bridges server chat ↔ Discord channel

These run on the server only — players don't need them installed.

## Mod Compatibility

### Client/Server Sides

| Side | Mods |
|------|------|
| **Client-only** | Better Third Person |
| **Server-only** | AutoWhitelist, Better Sleep, Fabricord |
| **Both** | Most mods (122 total) |

### Not Available for 1.21.1
- **Create** - NeoForge only (no Fabric port)
- **Iron Chests** - Not yet updated
- **Decorative Blocks** - Stuck at 1.20.4
- **Effective** - Removed due to crash with REI (Veil/ImGui conflict)

## Requirements

- **Minecraft:** 1.21.1
- **Mod Loader:** Fabric 0.18.3+
- **Java:** 21 (required for 1.20.5+)
- **RAM:** 4GB minimum, 6GB recommended, 8GB for shaders

## Contributing

1. Fork the repository
2. Add/update mods using Packwiz commands
3. Test locally with `packwiz serve`
4. Submit a pull request

## License

This modpack configuration is open source. Individual mods retain their respective licenses. See [docs/CREDITS.md](docs/CREDITS.md) for a complete list of mod creators and donation links.

## Links

- [Prism Launcher](https://prismlauncher.org/) - Recommended launcher
- [Packwiz Documentation](https://packwiz.infra.link/) - Modpack tooling
- [Modrinth](https://modrinth.com/) - Mod hosting platform
- [BSL Shaders](https://modrinth.com/shader/bsl-shaders) - Default shader
- [Complementary Shaders](https://modrinth.com/shader/complementary-reimagined) - Alternative shader
- [Solas Shader](https://www.curseforge.com/minecraft/shaders/solas-shader) - Fantasy stylized shader
